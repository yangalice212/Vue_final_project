(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b53a2e6"],{"6d09":function(t,e,c){"use strict";c.r(e);var o=c("7a23"),n={class:"container"},a={class:"text-end my-4"},i={class:"table-responsive"},l={class:"table",style:{"min-width":"600px"}},s=Object(o["g"])("thead",null,[Object(o["g"])("tr",null,[Object(o["g"])("th",{class:"d-none d-md-table-cell"},"產品圖片"),Object(o["g"])("th",null,"產品名稱"),Object(o["g"])("th",null,"原價"),Object(o["g"])("th",null,"售價"),Object(o["g"])("th",{width:"120"},"狀態"),Object(o["g"])("th",{width:"150"},"編輯 / 刪除")])],-1),r={class:"d-none d-md-table-cell"},d={key:0,class:"text-success"},u={key:1},b={class:"btn-group"},p={class:"d-flex justify-content-center"};function g(t,e,c,g,m,j){var O=Object(o["x"])("Loading"),h=Object(o["x"])("Pagination"),f=Object(o["x"])("ProductModal");return Object(o["s"])(),Object(o["d"])(o["a"],null,[Object(o["g"])(O,{isLoading:m.isLoading},null,8,["isLoading"]),Object(o["g"])("div",n,[Object(o["g"])("div",a,[Object(o["g"])("button",{type:"button",class:"btn btn-primary me-2",onClick:e[1]||(e[1]=Object(o["J"])((function(t){return j.openModal({},"new")}),["prevent"]))}," 新增產品 "),Object(o["g"])("button",{type:"button",class:"btn btn-outline-danger",onClick:e[2]||(e[2]=Object(o["J"])((function(){return j.delProducts&&j.delProducts.apply(j,arguments)}),["prevent"]))}," 刪除全部產品 ")]),Object(o["g"])("div",i,[Object(o["g"])("table",l,[s,Object(o["g"])("tbody",null,[(Object(o["s"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(m.products,(function(t){return Object(o["s"])(),Object(o["d"])("tr",{key:t.id},[Object(o["g"])("td",r,[Object(o["g"])("div",{style:[{height:"100px","background-size":"cover","background-position":"center"},{"background-image":"url(".concat(t.imageUrl,")")}]},null,4)]),Object(o["g"])("td",null,Object(o["A"])(t.title),1),Object(o["g"])("td",null,"NT$ "+Object(o["A"])(t.price),1),Object(o["g"])("td",null,"NT$ "+Object(o["A"])(t.origin_price),1),Object(o["g"])("td",null,[t.is_enabled?(Object(o["s"])(),Object(o["d"])("span",d,"啟用")):(Object(o["s"])(),Object(o["d"])("span",u,"未啟用"))]),Object(o["g"])("td",null,[Object(o["g"])("div",b,[Object(o["g"])("button",{type:"button",class:"btn btn-sm btn-outline-secondary",onClick:function(e){return j.openModal(t,"edit")}}," 編輯 ",8,["onClick"]),Object(o["g"])("button",{type:" button",class:"btn btn-sm btn-outline-danger",onClick:function(e){return j.delProduct(t.id)}}," 刪除 ",8,["onClick"])])])])})),128))])])])]),Object(o["g"])("div",p,[Object(o["g"])(h,{page:m.pagination,onGetData:j.getProducts},null,8,["page","onGetData"])]),Object(o["g"])(f,{product:m.tempProduct,"is-new":m.isNew,onUpdateProduct:j.updateProduct,ref:"productModal"},null,8,["product","is-new","onUpdateProduct"])],64)}var m=c("5530"),j=(c("99af"),c("a4d3"),c("e01a"),{id:"productModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true",ref:"modal"}),O={class:"modal-dialog modal-xl"},h={class:"modal-content border-0"},f={class:"modal-header bg-dark text-white"},v={id:"productModalLabel",class:"modal-title"},y={key:0},P={key:1},w=Object(o["g"])("button",{type:"button",class:"btn-close bg-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),k={class:"modal-body text-start text-dark"},x={class:"row"},U={class:"col-sm-4"},$={class:"mb-1"},C={class:"form-group"},L={class:"input-group mb-1"},I=Object(o["g"])("div",{class:"mb-1"},"多圖新增",-1),B={key:0},M={class:"form-group"},D=Object(o["g"])("label",{for:"imageUrl"},"輸入圖片網址",-1),N={key:0},T={key:1},V={class:"col-sm-8"},_={class:"form-group"},E=Object(o["g"])("label",{for:"title"},"標題",-1),S={class:"row"},A={class:"form-group col-md-6"},J=Object(o["g"])("label",{for:"category"},"分類",-1),G={class:"form-group col-md-6"},z=Object(o["g"])("label",{for:"unit"},"單位",-1),F={class:"row"},q={class:"form-group col-md-6"},H=Object(o["g"])("label",{for:"origin_price"},"原價",-1),K={class:"form-group col-md-6"},Q=Object(o["g"])("label",{for:"price"},"售價",-1),R=Object(o["g"])("hr",null,null,-1),W={class:"form-group"},X=Object(o["g"])("label",{for:"description"},"產品描述",-1),Y={class:"form-group"},Z=Object(o["g"])("label",{for:"content"},"說明內容",-1),tt={class:"form-group"},et={class:"form-check"},ct=Object(o["g"])("label",{class:"form-check-label",for:"is_enabled"},"是否啟用",-1),ot={class:"modal-footer"},nt=Object(o["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function at(t,e,c,n,a,i){return Object(o["s"])(),Object(o["d"])("div",j,[Object(o["g"])("div",O,[Object(o["g"])("div",h,[Object(o["g"])("div",f,[Object(o["g"])("h5",v,[c.isNew?(Object(o["s"])(),Object(o["d"])("span",y,"新增產品")):(Object(o["s"])(),Object(o["d"])("span",P,"編輯產品"))]),w]),Object(o["g"])("div",k,[Object(o["g"])("div",x,[Object(o["g"])("div",U,[Object(o["g"])("div",$,[Object(o["g"])("div",C,[Object(o["g"])("div",L,[Object(o["g"])("input",{onChange:e[1]||(e[1]=function(){return i.getImgData&&i.getImgData.apply(i,arguments)}),id:"imageUrl",type:"file",accept:".jpg, .png",class:"form-control",placeholder:"drag picture to here",ref:"imageUrl"},null,544),Object(o["g"])("button",{onClick:e[2]||(e[2]=function(){return i.uploadImg&&i.uploadImg.apply(i,arguments)}),disabled:!a.imgData,class:"btn btn-sm btn-outline-success flex-shrink-0",type:"button"}," 確定上傳 ",8,["disabled"])]),Object(o["g"])("img",{class:"img-fluid",src:a.tempProduct.imageUrl},null,8,["src"])])]),I,Array.isArray(a.tempProduct.imagesUrl)?(Object(o["s"])(),Object(o["d"])("div",B,[(Object(o["s"])(!0),Object(o["d"])(o["a"],null,Object(o["w"])(a.tempProduct.imagesUrl,(function(t,e){return Object(o["s"])(),Object(o["d"])("div",{key:e,class:"mb-1"},[Object(o["g"])("div",M,[D,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":function(t){return a.tempProduct.imagesUrl[e]=t},type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,8,["onUpdate:modelValue"]),[[o["E"],a.tempProduct.imagesUrl[e]]])]),Object(o["g"])("img",{class:"img-fluid",src:t},null,8,["src"])])})),128)),!a.tempProduct.imagesUrl.length||a.tempProduct.imagesUrl[a.tempProduct.imagesUrl.length-1]?(Object(o["s"])(),Object(o["d"])("div",N,[Object(o["g"])("button",{onClick:e[3]||(e[3]=function(t){return a.tempProduct.imagesUrl.push("")}),class:"btn btn-outline-primary btn-sm d-block w-100"}," 新增圖片 ")])):(Object(o["s"])(),Object(o["d"])("div",T,[Object(o["g"])("button",{onClick:e[4]||(e[4]=function(t){return a.tempProduct.imagesUrl.pop()}),class:"btn btn-outline-danger btn-sm d-block w-100"}," 刪除圖片 ")]))])):Object(o["e"])("",!0)]),Object(o["g"])("div",V,[Object(o["g"])("div",_,[E,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[5]||(e[5]=function(t){return a.tempProduct.title=t}),id:"title",type:"text",class:"form-control",placeholder:"請輸入標題"},null,512),[[o["E"],a.tempProduct.title,void 0,{trim:!0}]])]),Object(o["g"])("div",S,[Object(o["g"])("div",A,[J,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[6]||(e[6]=function(t){return a.tempProduct.category=t}),id:"category",type:"text",class:"form-control",placeholder:"請輸入分類"},null,512),[[o["E"],a.tempProduct.category,void 0,{trim:!0}]])]),Object(o["g"])("div",G,[z,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[7]||(e[7]=function(t){return a.tempProduct.unit=t}),id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位"},null,512),[[o["E"],a.tempProduct.unit,void 0,{trim:!0}]])])]),Object(o["g"])("div",F,[Object(o["g"])("div",q,[H,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[8]||(e[8]=function(t){return a.tempProduct.origin_price=t}),id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價"},null,512),[[o["E"],a.tempProduct.origin_price,void 0,{number:!0}]])]),Object(o["g"])("div",K,[Q,Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[9]||(e[9]=function(t){return a.tempProduct.price=t}),id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價"},null,512),[[o["E"],a.tempProduct.price,void 0,{number:!0}]])])]),R,Object(o["g"])("div",W,[X,Object(o["I"])(Object(o["g"])("textarea",{"onUpdate:modelValue":e[10]||(e[10]=function(t){return a.tempProduct.description=t}),id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述"},"\n                ",512),[[o["E"],a.tempProduct.description,void 0,{trim:!0}]])]),Object(o["g"])("div",Y,[Z,Object(o["I"])(Object(o["g"])("textarea",{"onUpdate:modelValue":e[11]||(e[11]=function(t){return a.tempProduct.content=t}),id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容"},"\n                ",512),[[o["E"],a.tempProduct.content,void 0,{trim:!0}]])]),Object(o["g"])("div",tt,[Object(o["g"])("div",et,[Object(o["I"])(Object(o["g"])("input",{"onUpdate:modelValue":e[12]||(e[12]=function(t){return a.tempProduct.is_enabled=t}),id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0},null,512),[[o["D"],a.tempProduct.is_enabled]]),ct])])])])]),Object(o["g"])("div",ot,[nt,Object(o["g"])("button",{onClick:e[13]||(e[13]=function(e){return t.$emit("update-product",a.tempProduct)}),type:"button",class:"btn btn-primary"}," 確認 ")])])])],512)}var it=c("9641"),lt={props:["product","isNew"],data:function(){return{imgData:null,tempProduct:Object(m["a"])({},this.product)}},mixins:[it["a"]],methods:{getImgData:function(t){var e=t.target.files[0],c=new FormData;c.append("file-to-upload",e),this.imgData=c},uploadImg:function(){var t=this;this.$http.post("".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/upload"),this.imgData).then((function(e){e.data.success?(t.imgData=null,t.$refs.imageUrl.value="","new"===t.isNew?t.tempProduct.imageUrl=e.data.imageUrl:"edit"===t.isNew&&t.tempProduct.imagesUrl.push(e.data.imageUrl)):alert(e.data.message)})).catch((function(t){console.log(t)}))}},watch:{product:function(){this.tempProduct=this.product,this.tempProduct.imagesUrl||(this.tempProduct.imagesUrl=[]),this.tempProduct.imageUrl||(this.tempProduct.imageUrl="")}}};lt.render=at;var st=lt,rt=c("1799"),dt={name:"Products",data:function(){return{products:[],tempProduct:{},pagination:{},isNew:!1,isLoading:!1}},components:{Pagination:rt["a"],ProductModal:st},created:function(){this.getProducts()},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0,console.log(this.isLoading);var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/products?page=").concat(e);this.$http.get(c).then((function(e){e.data.success?(t.products=e.data.products,t.pagination=e.data.pagination,t.isLoading=!1):t.$swal({title:e.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"})})).catch((function(t){console.log(t)}))},openModal:function(t,e){var c=this.$refs.productModal;switch(this.tempProduct=Object(m["a"])({},t),e){case"new":this.isNew=!0,c.openModal();break;case"edit":this.isNew=!1,c.openModal();break;default:break}},updateProduct:function(){var t=this;this.isLoading=!0;var e=this.$refs.productModal,c=this.isNew?"post":"put",o=this.isNew?"":"".concat(this.tempProduct.id),n="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/product/").concat(o);this.$http[c](n,{data:this.tempProduct}).then((function(c){c.data.success?(t.$swal({title:c.data.message,icon:"success"}),t.getProducts(),e.hideModal(),t.isLoading=!1):(t.$swal({title:c.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"}),t.isLoading=!1)})).catch((function(t){console.log(t)}))},delProduct:function(t){var e=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/product/").concat(t);this.$swal({icon:"warning",title:"確定要刪除嗎？",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(t){t.isConfirmed&&(e.isLoading=!0,e.$http.delete(c).then((function(t){t.data.success?(e.isLoading=!1,e.$swal(t.data.message,"","success"),e.getProducts()):e.$swal({title:t.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"})})))}))},delProducts:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io/","api/").concat("yangalice212","/admin/products/all");this.$swal({icon:"warning",title:"確定要全部刪除嗎？",showCancelButton:!0,confirmButtonText:"確定",cancelButtonText:"取消"}).then((function(c){c.isConfirmed&&(t.isLoading=!0,t.$http.delete(e).then((function(e){e.data.success?(t.isLoading=!1,t.$swal(e.data.message,"","success"),t.getProducts()):t.$swal({title:e.data.message,icon:"error",showCancelButton:!0,cancelButtonText:"取消"})})))}))}}};dt.render=g;e["default"]=dt},e01a:function(t,e,c){"use strict";var o=c("23e7"),n=c("83ab"),a=c("da84"),i=c("5135"),l=c("861d"),s=c("9bf2").f,r=c("e893"),d=a.Symbol;if(n&&"function"==typeof d&&(!("description"in d.prototype)||void 0!==d().description)){var u={},b=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof b?new d(t):void 0===t?d():d(t);return""===t&&(u[e]=!0),e};r(b,d);var p=b.prototype=d.prototype;p.constructor=b;var g=p.toString,m="Symbol(test)"==String(d("test")),j=/^Symbol\((.*)\)[^)]+$/;s(p,"description",{configurable:!0,get:function(){var t=l(this)?this.valueOf():this,e=g.call(t);if(i(u,t))return"";var c=m?e.slice(7,-1):e.replace(j,"$1");return""===c?void 0:c}}),o({global:!0,forced:!0},{Symbol:b})}}}]);
//# sourceMappingURL=chunk-6b53a2e6.d420d990.js.map